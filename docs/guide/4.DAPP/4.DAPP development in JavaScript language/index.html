<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DAPP development in JavaScript language | BitYuan</title>
    <meta name="generator" content="VuePress 1.9.5">
    
    <meta name="description" content="A demo for vuepress-theme-hope">
    <meta property="og:url" content="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language.html">
    <meta property="og:site_name" content="BitYuan">
    <meta property="og:title" content="DAPP development in JavaScript language">
    <meta property="og:description" content="DAPP development in JavaScript language&quot;Using JavaScript to develop DApp，The first step is to write a contract in a specific format，then deploy the contract to Chain33 using the c">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta property="og:locale:alternate" content="zh-CN">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="BitYuan">
    
    <link rel="preload" href="/assets/css/0.styles.b9744494.css" as="style"><link rel="preload" href="/assets/js/app.67e065aa.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Layout.2b7483c3.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.273fc434.js" as="script"><link rel="preload" href="/assets/js/page-DAPPdevelopmentinJavaScriptlanguage.75535821.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.4a182f2f.js" as="script"><link rel="prefetch" href="/assets/js/128.ca0d0866.js"><link rel="prefetch" href="/assets/js/129.4eae5b6b.js"><link rel="prefetch" href="/assets/js/130.b0844f6d.js"><link rel="prefetch" href="/assets/js/131.a022e1de.js"><link rel="prefetch" href="/assets/js/132.6043dfa3.js"><link rel="prefetch" href="/assets/js/layout-Blog.6829de3b.js"><link rel="prefetch" href="/assets/js/layout-Layout.85d11602.js"><link rel="prefetch" href="/assets/js/layout-NotFound.4658b628.js"><link rel="prefetch" href="/assets/js/layout-Slide.298ab16e.js"><link rel="prefetch" href="/assets/js/page-AccountModel.e6270d05.js"><link rel="prefetch" href="/assets/js/page-BalanceInquiry.2d588325.js"><link rel="prefetch" href="/assets/js/page-BitYuanIntroduction.e9695b4d.js"><link rel="prefetch" href="/assets/js/page-BitYuanMainNetworkEnvironmentConfiguration.00156ad0.js"><link rel="prefetch" href="/assets/js/page-BitYuanWalletGuidelines.f3e358df.js"><link rel="prefetch" href="/assets/js/page-BlockchainInterface.afa08540.js"><link rel="prefetch" href="/assets/js/page-BlockchainModule.2c8ce72c.js"><link rel="prefetch" href="/assets/js/page-Blockchain模块.222d6061.js"><link rel="prefetch" href="/assets/js/page-Buildparachain.7ac3a282.js"><link rel="prefetch" href="/assets/js/page-CA工具使用说明.85e9608f.js"><link rel="prefetch" href="/assets/js/page-CA服务使用说明.a6393237.js"><link rel="prefetch" href="/assets/js/page-CaseFoodTraceability.29a8e8cc.js"><link rel="prefetch" href="/assets/js/page-Chain33系统接口.3b4b7bbb.js"><link rel="prefetch" href="/assets/js/page-ConsensusModule.eaec80d0.js"><link rel="prefetch" href="/assets/js/page-CreateBitYuanparentBlockchain.c4e8898c.js"><link rel="prefetch" href="/assets/js/page-DAPPdevelopmentinGolanguage.a0b2b1bb.js"><link rel="prefetch" href="/assets/js/page-DAPPdevelopmentinSoliditylanguage.44233f8a.js"><link rel="prefetch" href="/assets/js/page-DAPP开发介绍.e21d9406.js"><link rel="prefetch" href="/assets/js/page-DecentralizedApplication.36143730.js"><link rel="prefetch" href="/assets/js/page-Deployblockchainbrowser.7a0af478.js"><link rel="prefetch" href="/assets/js/page-Deploysmartcontract.5a1e5cc7.js"><link rel="prefetch" href="/assets/js/page-Deploywallet.eaf467e8.js"><link rel="prefetch" href="/assets/js/page-Dockingwithexternalapplication.38d88ab0.js"><link rel="prefetch" href="/assets/js/page-EVMInterface.a7bff9fa.js"><link rel="prefetch" href="/assets/js/page-EVM接口.650520c6.js"><link rel="prefetch" href="/assets/js/page-EventInterface.26204e7d.js"><link rel="prefetch" href="/assets/js/page-ExecutorInterface.9abe124d.js"><link rel="prefetch" href="/assets/js/page-ExecutorModule.c5940b31.js"><link rel="prefetch" href="/assets/js/page-GRPC接口约定.d9f2428a.js"><link rel="prefetch" href="/assets/js/page-Go语言开发DAPP.9319d84b.js"><link rel="prefetch" href="/assets/js/page-InterfaceContract.be12888e.js"><link rel="prefetch" href="/assets/js/page-IntroductiontoDAppDevelopment.2f9fd355.js"><link rel="prefetch" href="/assets/js/page-JavaScript语言开发DAPP.6cdb2130.js"><link rel="prefetch" href="/assets/js/page-Manage.04fc0506.js"><link rel="prefetch" href="/assets/js/page-ManageInterface.43688e9d.js"><link rel="prefetch" href="/assets/js/page-MempoolInterface.1753593e.js"><link rel="prefetch" href="/assets/js/page-MempoolModule.c75240d6.js"><link rel="prefetch" href="/assets/js/page-Mempool接口.37708133.js"><link rel="prefetch" href="/assets/js/page-Mempool模块.8c0d9c7f.js"><link rel="prefetch" href="/assets/js/page-MiningInterface.ea39b789.js"><link rel="prefetch" href="/assets/js/page-NetworkType.65ff277a.js"><link rel="prefetch" href="/assets/js/page-P2PModule.9e5f371e.js"><link rel="prefetch" href="/assets/js/page-P2P模块.4e4dab23.js"><link rel="prefetch" href="/assets/js/page-ParachainTokenIssuance.14b815c7.js"><link rel="prefetch" href="/assets/js/page-Project.5b38a30a.js"><link rel="prefetch" href="/assets/js/page-QueueModule.8e6e9b6e.js"><link rel="prefetch" href="/assets/js/page-Queue模块.d90f36ed.js"><link rel="prefetch" href="/assets/js/page-RPCModule.054d8033.js"><link rel="prefetch" href="/assets/js/page-RPC接口编程样例.8dc3e3b6.js"><link rel="prefetch" href="/assets/js/page-RPC模块.a98472b4.js"><link rel="prefetch" href="/assets/js/page-SPOSConsensus.50497cb8.js"><link rel="prefetch" href="/assets/js/page-SPOS共识.43c94739.js"><link rel="prefetch" href="/assets/js/page-SmartContract.607af1bb.js"><link rel="prefetch" href="/assets/js/page-Solidity语言开发DAPP.a05556e2.js"><link rel="prefetch" href="/assets/js/page-StorageModule.441dfdb0.js"><link rel="prefetch" href="/assets/js/page-SystemInterface.6c9adae8.js"><link rel="prefetch" href="/assets/js/page-SystemModule.4676aeb3.js"><link rel="prefetch" href="/assets/js/page-TechnicalArchitecture.ed6d530c.js"><link rel="prefetch" href="/assets/js/page-Terminology.770af89b.js"><link rel="prefetch" href="/assets/js/page-TokenInterface.0aebaf0f.js"><link rel="prefetch" href="/assets/js/page-Token接口.d7bb75a6.js"><link rel="prefetch" href="/assets/js/page-Trade.c28bf57d.js"><link rel="prefetch" href="/assets/js/page-Trade接口.08b38b4b.js"><link rel="prefetch" href="/assets/js/page-TransactionInterface.578ff59f.js"><link rel="prefetch" href="/assets/js/page-Unfreeze.237f6582.js"><link rel="prefetch" href="/assets/js/page-UnfreezeInterface.f62bc362.js"><link rel="prefetch" href="/assets/js/page-WalletInterface.006e17ee.js"><link rel="prefetch" href="/assets/js/page-WalletModule.9004c9b5.js"><link rel="prefetch" href="/assets/js/page-WalletRecoveryContract.2d8aba2c.js"><link rel="prefetch" href="/assets/js/page-Wallet接口.3cfbe5e2.js"><link rel="prefetch" href="/assets/js/page-autonomy接口.fabee1ab.js"><link rel="prefetch" href="/assets/js/page-事件接口.4cb5f2c3.js"><link rel="prefetch" href="/assets/js/page-交易接口.4092cc58.js"><link rel="prefetch" href="/assets/js/page-公链发展趋势.586b3d42.js"><link rel="prefetch" href="/assets/js/page-共识模块.45237755.js"><link rel="prefetch" href="/assets/js/page-创建比特元主链节点.c0b6b277.js"><link rel="prefetch" href="/assets/js/page-区块链接口.37cb3112.js"><link rel="prefetch" href="/assets/js/page-去中心化应用.0a2cdd22.js"><link rel="prefetch" href="/assets/js/page-命令行工具介绍.bcbb3125.js"><link rel="prefetch" href="/assets/js/page-国密支持.10f72d68.js"><link rel="prefetch" href="/assets/js/page-多重签名.fb7a07aa.js"><link rel="prefetch" href="/assets/js/page-存储模块.f7c850ac.js"><link rel="prefetch" href="/assets/js/page-对接外部应用.2a4f35e8.js"><link rel="prefetch" href="/assets/js/page-平行链共识节点挖矿奖励规则.95460cf5.js"><link rel="prefetch" href="/assets/js/page-平行链发行Token.3ad26a73.js"><link rel="prefetch" href="/assets/js/page-平行链环境配置.a9a41fb4.js"><link rel="prefetch" href="/assets/js/page-平行链资产转移管理介绍.4e47a4d3.js"><link rel="prefetch" href="/assets/js/page-平行链超级节点创建和超级账户管理介绍.aa673877.js"><link rel="prefetch" href="/assets/js/page-执行器接口.1ee28bbe.js"><link rel="prefetch" href="/assets/js/page-执行器模块.e4671cb5.js"><link rel="prefetch" href="/assets/js/page-技术架构.2ddaa4da.js"><link rel="prefetch" href="/assets/js/page-挖矿接口.0f80edbe.js"><link rel="prefetch" href="/assets/js/page-接口约定.d9241964.js"><link rel="prefetch" href="/assets/js/page-搭建平行链.b7afc70b.js"><link rel="prefetch" href="/assets/js/page-文档主页.d58ccf83.js"><link rel="prefetch" href="/assets/js/page-智能合约.cb22bbd8.js"><link rel="prefetch" href="/assets/js/page-术语介绍.e2d36148.js"><link rel="prefetch" href="/assets/js/page-查询余额.989576d5.js"><link rel="prefetch" href="/assets/js/page-比特元主网环境配置.f4cd8082.js"><link rel="prefetch" href="/assets/js/page-比特元介绍.afb0841d.js"><link rel="prefetch" href="/assets/js/page-比特元钱包操作手册.e7dbb370.js"><link rel="prefetch" href="/assets/js/page-测试.cd5c365d.js"><link rel="prefetch" href="/assets/js/page-系统模块.db3e3fbc.js"><link rel="prefetch" href="/assets/js/page-系统要求.ea5a4579.js"><link rel="prefetch" href="/assets/js/page-网络类型.1ad78830.js"><link rel="prefetch" href="/assets/js/page-账户模型.bb8307ff.js"><link rel="prefetch" href="/assets/js/page-部署区块链浏览器.c5ba6524.js"><link rel="prefetch" href="/assets/js/page-部署智能合约.97fc31ba.js"><link rel="prefetch" href="/assets/js/page-部署钱包.4be9f7db.js"><link rel="prefetch" href="/assets/js/page-钱包找回合约.922bc9e7.js"><link rel="prefetch" href="/assets/js/page-钱包模块.993d1312.js"><link rel="prefetch" href="/assets/js/page-错误码.502f9a45.js"><link rel="prefetch" href="/assets/js/page-隐私保护.e60d54d0.js"><link rel="prefetch" href="/assets/js/page-食品溯源案例.5e595755.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.b0bb2a13.js"><link rel="prefetch" href="/assets/js/vendors~mermaid.e5709914.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.c71006e0.js"><link rel="prefetch" href="/assets/js/vendors~reveal.9fb9d0ac.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b9744494.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/" class="home-link router-link-active"><img src="/logo.svg" alt="BitYuan" class="logo"> <!----> <span class="site-name can-hide">BitYuan</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><!----> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="switch"><input id="switch" type="checkbox" checked="checked" class="switch-input"> <label for="switch" class="label"><span class="label-content"></span></label></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link router-link-active"><!---->
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active active"><!---->
  Guide
</a></div></nav> <div class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" style="width:1rem;height:1rem;vertical-align:middle;margin-left:1rem;"><path d="M639.981 344.075c14.805 44.45 34.542 79.023 69.084 113.596 29.603-29.634 49.34-69.146 64.145-113.596H639.981zM314.33 591.024h128.29l-64.145-172.865-64.145 172.865z" fill="currentColor"></path> <path d="M807.746 116.882H215.643c-54.274 0-98.681 44.45-98.681 98.78v592.677c0 54.329 44.407 98.78 98.68 98.78h592.104c54.273 0 98.681-44.451 98.681-98.78V215.66c0-54.329-39.475-98.78-98.68-98.78zM565.971 754.01c-9.866 9.878-19.738 9.878-29.603 9.878-4.94 0-14.805 0-19.738-4.939-4.939-4.939-9.872 0-9.872-4.939s-4.932-9.878-9.865-19.756c-4.94-9.878-4.94-14.817-9.872-24.695L467.29 655.23H294.592l-19.737 54.33c-9.866 19.755-14.805 34.572-19.738 44.45-4.939 9.878-14.804 9.878-29.603 9.878-9.871 0-19.737-4.939-29.609-9.878-9.865-9.878-14.798-14.817-14.798-24.695 0-4.939 0-9.878 4.933-19.756 4.939-9.878 4.939-14.817 9.865-24.695l108.553-276.583c4.939-9.878 4.939-19.756 9.872-29.633 4.932-9.878 9.865-19.756 14.798-24.695 4.939-4.94 9.872-14.817 19.737-19.756 9.872-4.94 19.738-4.94 29.61-4.94 9.865 0 19.73 0 29.603 4.94 9.865 4.939 14.804 9.878 19.737 19.756 4.933 4.939 9.866 14.817 14.798 24.695 4.94 9.877 9.872 19.755 14.805 34.572l108.553 271.644c9.865 19.756 14.804 34.573 14.804 44.451-4.939 4.94-9.872 14.817-14.804 24.695zm271.378-192.62c-54.273-19.756-93.748-44.451-128.29-74.085-34.536 34.573-78.943 59.268-133.223 74.085l-14.798-24.695c54.273-14.817 98.68-34.573 133.223-69.146-34.542-34.573-64.145-79.024-74.017-128.413h-49.34V319.38h133.228c-9.877-14.817-19.743-34.573-29.609-49.39l14.799-4.94c9.871 14.818 24.676 34.574 34.542 54.33h123.35v24.695h-49.34c-14.798 49.39-39.468 93.84-69.077 123.474 34.541 29.634 74.01 54.329 128.29 69.146l-19.738 24.695z" fill="currentColor"></path></svg> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/" aria-current="page" class="nav-link router-link-exact-active router-link-active active"><!---->
  English
</a></li><li class="dropdown-item"><a href="/zh/" class="nav-link"><!---->
  简体中文
</a></li></ul></div></div></div> <a rel="noopener noreferrer" href="https://github.com/bityuan/bty-docs" target="_blank" class="repo-link can-hide">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="/" class="nav-link router-link-active"><!---->
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active active"><!---->
  Guide
</a></div> <a rel="noopener noreferrer" href="https://github.com/bityuan/bty-docs" target="_blank" class="repo-link">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><!----> <span class="title">Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" aria-current="page" class="sidebar-link">BitYuan Introduction</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">Introduction</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">Quick Start</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">Advanced</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable open"><!----> <span class="title">DAPP</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/4.DAPP/1.Introduction%20to%20DApp%20Development/" class="sidebar-link">Introduction to DApp Development</a></li><li><a href="/guide/4.DAPP/2.DAPP%20development%20in%20Go%20language/" class="sidebar-link">DAPP development in Go language</a></li><li><a href="/guide/4.DAPP/3.DAPP%20development%20in%20Solidity%20language/" class="sidebar-link">DAPP development in Solidity language</a></li><li><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/" aria-current="page" class="active sidebar-link">DAPP development in JavaScript language</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#write-contract-in-javascript" class="sidebar-link">Write Contract in JavaScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#define-storage-structure" class="sidebar-link heading3">Define Storage Structure</a></li><li class="sidebar-sub-header"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#init-function" class="sidebar-link heading3">Init Function</a></li><li class="sidebar-sub-header"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#a-certain-method-of-exec" class="sidebar-link heading3">A Certain Method of Exec</a></li><li class="sidebar-sub-header"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#a-certain-method-of-execlocal" class="sidebar-link heading3">A Certain Method of ExecLocal</a></li><li class="sidebar-sub-header"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#a-certain-method-of-query" class="sidebar-link heading3">A Certain Method of Query</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#deploy-smart-contracts-using-cli-debugging-tools" class="sidebar-link">Deploy Smart Contracts Using Cli Debugging Tools</a></li><li class="sidebar-sub-header"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#call-the-jsonrpc-interface-to-deploy-smart-contract" class="sidebar-link">Call the JSONRPC Interface to Deploy Smart Contract</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#deploy-a-jsvm-contract-createtransaction" class="sidebar-link heading3">Deploy a JSVM Contract CreateTransaction</a></li><li class="sidebar-sub-header"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#calls-the-method-of-the-created-jsvm-contract-createtransaction" class="sidebar-link heading3">Calls the method of the created JSVM contract CreateTransaction</a></li><li class="sidebar-sub-header"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#query-the-created-jsvm-contract" class="sidebar-link heading3">Query the Created JSVM Contract</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">Blockchain Browser</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">Wallet</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">API Reference</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">Case Introduction</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">Test</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb disable"><!----></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">DAPP development in JavaScript language</span></h1> <div class="page-info"><!----> <!----><span aria-label="Writing Date📅" data-balloon-pos="down" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2022-1-28</span></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#write-contract-in-javascript" class="anchor-link heading2"><div>Write Contract in JavaScript</div></a></li><li class="anchor"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#define-storage-structure" class="anchor-link heading3"><div>Define Storage Structure</div></a></li><li class="anchor"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#init-function" class="anchor-link heading3"><div>Init Function</div></a></li><li class="anchor"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#a-certain-method-of-exec" class="anchor-link heading3"><div>A Certain Method of Exec</div></a></li><li class="anchor"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#a-certain-method-of-execlocal" class="anchor-link heading3"><div>A Certain Method of ExecLocal</div></a></li><li class="anchor"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#a-certain-method-of-query" class="anchor-link heading3"><div>A Certain Method of Query</div></a></li><li class="anchor"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#deploy-smart-contracts-using-cli-debugging-tools" class="anchor-link heading2"><div>Deploy Smart Contracts Using Cli Debugging Tools</div></a></li><li class="anchor"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#call-the-jsonrpc-interface-to-deploy-smart-contract" class="anchor-link heading2"><div>Call the JSONRPC Interface to Deploy Smart Contract</div></a></li><li class="anchor"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#deploy-a-jsvm-contract-createtransaction" class="anchor-link heading3"><div>Deploy a JSVM Contract CreateTransaction</div></a></li><li class="anchor"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#calls-the-method-of-the-created-jsvm-contract-createtransaction" class="anchor-link heading3"><div>Calls the method of the created JSVM contract CreateTransaction</div></a></li><li class="anchor"><a href="/guide/4.DAPP/4.DAPP%20development%20in%20JavaScript%20language/#query-the-created-jsvm-contract" class="anchor-link heading3"><div>Query the Created JSVM Contract</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="dapp-development-in-javascript-language"><a href="#dapp-development-in-javascript-language" class="header-anchor">#</a> DAPP development in JavaScript language</h1> <blockquote><p>Using JavaScript to develop DApp，The first step is to write a contract in a specific format，then deploy the contract to Chain33 using the cli debugging tool or calling the JSONRPC interface，and the desired action will be accomplished by calling the corresponding method.</p></blockquote> <h2 id="write-contract-in-javascript"><a href="#write-contract-in-javascript" class="header-anchor">#</a> Write Contract in JavaScript</h2> <p>General js files contain the following rules:</p> <ul><li>Define Init(context) function: this function will be called when the contract is deploying, the purpose is to prepare resources for a contract, mainly store the object kvcreator and the information context.</li> <li>Define a certain method of the object exec：Write some data to stateDB and pass some log information that needs to be recorded in tables.</li> <li>Define a certain value of the ExecLocal object: write log information to a table or write some data to localDB.
Certain method of defining the object Query: query the data in the table or localDB.</li></ul> <blockquote><p>Based on the framework of Chain33，a method called through the Call of JSVM will execute the corresponding Exec object and the method of ExecLocal object with the same name，such as the payload.funcname of Call is “NewGame”，and then execute the NewGame method of Exec object and NewGame method of ExecLocal object.</p></blockquote> <p>Below combines <a href="https://github.com/33cn/plugin/blob/master/plugin/dapp/js/executor/game.js" target="_blank" rel="noopener noreferrer">game.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to introduce concretely:</p> <p>Game.js defines a game of guessing Numbers. The rules of the game are:</p> <ul><li>the banker hash a number from 0 to 10 (random number + 9) (total compensation amount).Corresponding to the NewGame method.</li> <li>Multiple users can guess this number, corresponding to the Guess method.</li> <li>The lottery, corresponding to the CloseGame method.</li></ul> <blockquote><p>Here are just a few examples of the NewGame method, with the other two methods referenced in the code linked above.</p></blockquote> <h3 id="define-storage-structure"><a href="#define-storage-structure" class="header-anchor">#</a> Define Storage Structure</h3> <p>To store the above information, you need to create three tables, a GameLocalTable，a MatchLocalTable，and a MatchGameTable，MatchGameTable is a temporary table based on the above two tables, which is similar to the relational database generated by join operation.</p> <p>Create a table that contains the config and defaultvalue sections（Only needs to call JoinTable method）config sets table structure，including two types of table property configuration items (starting with #) and column property configuration.Table properties have table name, primary key, and storage db type.Defaultvalue is used to set the default value for the column properties.</p> <p>Here is the code to create the GameLocalTable：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">GameLocalTable</span><span class="token punctuation">(</span><span class="token parameter">kvc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>config <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;#tablename&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;game&quot;</span><span class="token punctuation">,</span><span class="token comment">//Define the name of the table</span>
        <span class="token string">&quot;#primary&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;gameid&quot;</span><span class="token punctuation">,</span> <span class="token comment">//Define the primary key</span>
        <span class="token string">&quot;#db&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;localdb&quot;</span><span class="token punctuation">,</span>            <span class="token comment">//Define the db type of storage, generally localdb</span>
        <span class="token string">&quot;gameid&quot;</span>    <span class="token operator">:</span> <span class="token string">&quot;%018d&quot;</span><span class="token punctuation">,</span>  <span class="token comment">//Table primary key, game ID, can be defined with the transaction general index (txID())</span>
        <span class="token string">&quot;status&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;%d&quot;</span><span class="token punctuation">,</span>               <span class="token comment">//Game state: 0- not start, 1- start, 2- close</span>
        <span class="token string">&quot;hash&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span>                  <span class="token comment">//Transaction hash</span>
        <span class="token string">&quot;addr&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span>                  <span class="token comment">//Create the trader's address</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>defaultvalue <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;gameid&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string">&quot;status&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string">&quot;hash&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;addr&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span>kvc<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>defaultvalue<span class="token punctuation">)</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>Here is the code to create the MatchLocalTable:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">MatchLocalTable</span><span class="token punctuation">(</span><span class="token parameter">kvc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>config <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;#tablename&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;match&quot;</span><span class="token punctuation">,</span>   <span class="token comment">//Define the name of the table</span>
        <span class="token string">&quot;#primary&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span>                  <span class="token comment">//Define the primary key</span>
        <span class="token string">&quot;#db&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;localdb&quot;</span><span class="token punctuation">,</span>                  <span class="token comment">//Define the db type of storage, generally localdb</span>
        <span class="token string">&quot;id&quot;</span>    <span class="token operator">:</span> <span class="token string">&quot;%018d&quot;</span><span class="token punctuation">,</span>                   <span class="token comment">//Table primary key, game ID, can be defined with the transaction general index (txID())</span>
        <span class="token string">&quot;gameid&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;%018d&quot;</span><span class="token punctuation">,</span>           <span class="token comment">//Table foreign key, corresponding to the GameLocalTable table primary key</span>
        <span class="token string">&quot;hash&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span>                         <span class="token comment">//Transaction hash</span>
        <span class="token string">&quot;addr&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span>                          <span class="token comment">//The address of the number guesser participating in the game</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>defaultvalue <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string">&quot;gameid&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string">&quot;hash&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;addr&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span>kvc<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>defaultvalue<span class="token punctuation">)</span>  
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>Here is the code to create the MatchGameTable：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">MatchGameTable</span><span class="token punctuation">(</span><span class="token parameter">kvc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//The lefttable parameter is a table using foreign keys with a relatively large amount of data, and the index parameter is the field name to query the join table</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">JoinTable</span><span class="token punctuation">(</span><span class="token function">MatchLocalTable</span><span class="token punctuation">(</span>kvc<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">GameLocalTable</span><span class="token punctuation">(</span>kvc<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;addr#status&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="init-function"><a href="#init-function" class="header-anchor">#</a> Init Function</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Init</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>kvc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">kvcreator</span><span class="token punctuation">(</span><span class="token string">&quot;init&quot;</span><span class="token punctuation">)</span><span class="token comment">//Create an init type object to store the key and value values</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context <span class="token comment">//Save context information</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>kvc<span class="token punctuation">.</span><span class="token function">receipt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="a-certain-method-of-exec"><a href="#a-certain-method-of-exec" class="header-anchor">#</a> A Certain Method of Exec</h3> <p>This method can be called by the chain33-cli debugging tool or the call method of JSONRPC, and the value is the equal to payload.funcname.The main function is to write some information to stateDB through kvc.add(), and pass log information through kvc.addlog().</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Exec</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">NewGame</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
    <span class="token keyword">var</span> game <span class="token operator">=</span> <span class="token punctuation">{</span>__type__ <span class="token operator">:</span> <span class="token string">&quot;game&quot;</span><span class="token punctuation">}</span>
    game<span class="token punctuation">.</span>gameid <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">txID</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    game<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>height
    game<span class="token punctuation">.</span>randhash <span class="token operator">=</span> args<span class="token punctuation">.</span>randhash
    game<span class="token punctuation">.</span>bet <span class="token operator">=</span> args<span class="token punctuation">.</span>bet
    game<span class="token punctuation">.</span>hash <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>txhash
    game<span class="token punctuation">.</span>obet <span class="token operator">=</span> game<span class="token punctuation">.</span>bet
    game<span class="token punctuation">.</span>addr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>from
    game<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">//open</span>
    <span class="token comment">//The maximum value is 90 million, otherwise when js to int will overflow</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>game<span class="token punctuation">.</span>bet <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token constant">COINS</span> <span class="token operator">||</span> game<span class="token punctuation">.</span>bet <span class="token operator">&gt;</span> <span class="token number">10000000</span> <span class="token operator">*</span> <span class="token constant">COINS</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">throwerr</span><span class="token punctuation">(</span><span class="token string">&quot;bet low than 10 or hight than 10000000&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>kvc<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>game<span class="token punctuation">.</span>randhash<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//If randhash has been used</span>
        <span class="token function">throwerr</span><span class="token punctuation">(</span><span class="token string">&quot;dup rand hash&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> err <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>acc<span class="token punctuation">.</span><span class="token function">execFrozen</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>from<span class="token punctuation">,</span> game<span class="token punctuation">.</span>bet<span class="token punctuation">)</span>    <span class="token comment">//Freeze declarer's bonus pool</span>
    <span class="token function">throwerr</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>kvc<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>game<span class="token punctuation">.</span>gameid<span class="token punctuation">,</span> game<span class="token punctuation">)</span>  <span class="token comment">//Store key:gameid and value:game to stateDB</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>kvc<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>game<span class="token punctuation">.</span>randhash<span class="token punctuation">,</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">)</span><span class="token comment">//Store key:randhash与value:&quot;ok&quot; to stateDB</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>kvc<span class="token punctuation">.</span><span class="token function">addlog</span><span class="token punctuation">(</span>game<span class="token punctuation">)</span>  <span class="token comment">//Pass object game to ExecLocal.prototype.NewGame</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>kvc<span class="token punctuation">.</span><span class="token function">receipt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="a-certain-method-of-execlocal"><a href="#a-certain-method-of-execlocal" class="header-anchor">#</a> A Certain Method of ExecLocal</h3> <p>This method writes the log information passed by the method of the corresponding Exec to table, or calls kvc.add () to directly write the data to stateDB.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">localprocess</span><span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> local <span class="token operator">=</span> <span class="token function">MatchGameTable</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>kvc<span class="token punctuation">)</span>
    local<span class="token punctuation">.</span><span class="token function">addlogs</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>logs<span class="token punctuation">)</span>   <span class="token comment">//Operation join table, achieve the purpose of automatically updating the associated table</span>
    local<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                           <span class="token comment">//Save data</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>kvc<span class="token punctuation">.</span><span class="token function">receipt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token class-name">ExecLocal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">NewGame</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">localprocess</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="a-certain-method-of-query"><a href="#a-certain-method-of-query" class="header-anchor">#</a> A Certain Method of Query</h3> <p>This method can be called by the chain33-cli debugging tool or the call method of JSONRPC, and the value is the equal to payload.funcname The function of querying data according to the passed parameters can be realized. You can query through tables or directly query localDB.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//Query game information according to the game creator's address</span>
<span class="token class-name">Query</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">ListGameByAddr</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> local <span class="token operator">=</span> <span class="token function">GameLocalTable</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>kvc<span class="token punctuation">)</span>
    <span class="token keyword">var</span> q <span class="token operator">=</span> local<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">&quot;addr&quot;</span><span class="token punctuation">,</span> args<span class="token punctuation">.</span>addr<span class="token punctuation">,</span> args<span class="token punctuation">.</span>primaryKey<span class="token punctuation">,</span> args<span class="token punctuation">.</span>count<span class="token punctuation">,</span> args<span class="token punctuation">.</span>direction<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token function">querytojson</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="deploy-smart-contracts-using-cli-debugging-tools"><a href="#deploy-smart-contracts-using-cli-debugging-tools" class="header-anchor">#</a> Deploy Smart Contracts Using Cli Debugging Tools</h2> <p>Chain33-cli is our debugger and you can conviniently do some things with the chain33-cli command. Here’s how to use the chain33-cli command to deploy the smart contract on the chain33 chain and invoke the methods in the smart contract.</p> <hr> <blockquote><p>**step1:**Deploy the smart contract on chain chain33 using the chain33-cli command:</p></blockquote> <div class="language- extra-class"><pre><code>./chain33-cli send jsvm create -c &quot;The contract code file path&quot; -n &quot;contract name&quot; -k &quot;The private key or address of the creator of the contract&quot;

root@ubuntu055-3:/home/lcj0# ./chain33-cli send jsvm create -c &quot;/home/hugo/game.js&quot; -n game -k 14KEKbYtKKQm4wMthSK9J4La4nAiidGozt
</code></pre></div><hr> <blockquote><p>**step2：**After the deployment of contract code, a transaction hash is generated, which will be used to query the transaction:</p></blockquote> <div class="language- extra-class"><pre><code>./chain33-cli tx query_hash -s &quot;transaction hash&quot;

root@ubuntu055-3:/home/lcj0# ./chain33-cli tx query_hash -s 0xd4cfd1606ea1d9382b3334351e3e741cad8a68b4e7b38a4b02c981203865cb03
</code></pre></div><p>*The returned results can be seen as follows: the contract name is used in operations of contract transfer or retrieval, code is the content of js file.</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>...
<span class="token property">&quot;execer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jsvm&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;payload&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;create&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;...js file content...&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;game&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ty&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><hr> <blockquote><p>**step3:**Recharge the contract</p></blockquote> <p>Because contract game need the game creator (the banker) to pledge some assets as the prize pool，so the participator need to recharge 100 BTY through the command line to the contract,Note that the - e parameter must be in the form of “user. jsvm. contract name”.</p> <div class="language- extra-class"><pre><code>./chain33-cli send coins send_exec -a BTY number -e &quot;The contract name&quot; -n &quot;postscript&quot; -k &quot;The private key or address of the creator of the contract&quot;

./chain33-cli send coins send_exec -a 100 -e &quot;user.jsvm.game&quot; -n &quot;12312&quot; -k 14KEKbYtKKQm4wMthSK9J4La4nAiidGozt
</code></pre></div><blockquote><p>Use command to see whether the recharge was successful or not.</p></blockquote> <div class="language- extra-class"><pre><code>./chain33-cli tx query_hash -s 0xa627e07e3ba7c47fd2e16812b34f82d6e07c6c074d2043abdb6b2d57dc9b4d4b
</code></pre></div><div class="language-json line-numbers-mode"><pre class="language-json"><code>...
    <span class="token property">&quot;ty&quot;</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tyName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;LogExecDeposit&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;log&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;execAddr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;15mjHYNvPkSMrp3SQxtczXL6cinMAEdeKs&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;prev&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;frozen&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;addr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;14KEKbYtKKQm4wMthSK9J4La4nAiidGozt&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;current&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000000000&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;frozen&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;addr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;14KEKbYtKKQm4wMthSK9J4La4nAiidGozt&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
 ...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>current.balance is 100* 1e8 now</p> <hr> <blockquote><p>**step4:**call the NewGame method in the contract to create the game.</p></blockquote> <div class="language- extra-class"><pre><code>./chain33-cli send jsvm call -n &quot;The contract name&quot; -f  &quot;The method name&quot; -a &quot;Parameter list in json format&quot; -k &quot;The private key or address of the creator of the contract&quot;

./chain33-cli send jsvm call -n game -f NewGame -a &quot;{\&quot;bet\&quot;:1500000000, \&quot;randhash\&quot;:\&quot;0x5d2ac15654aa1859af80d1dfa5d7a5775c359fe3a49abce03796f4fbc313b57f\&quot;}&quot; -k 14KEKbYtKKQm4wMthSK9J4La4nAiidGozt
</code></pre></div><blockquote><p>Use the command to query whether the creation was successful.</p></blockquote> <div class="language-json line-numbers-mode"><pre class="language-json"><code>...
    <span class="token property">&quot;ty&quot;</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tyName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;LogExecFrozen&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;log&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;execAddr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;15mjHYNvPkSMrp3SQxtczXL6cinMAEdeKs&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;prev&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000000000&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;frozen&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;addr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;14KEKbYtKKQm4wMthSK9J4La4nAiidGozt&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;current&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;8500000000&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;frozen&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1500000000&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;addr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;14KEKbYtKKQm4wMthSK9J4La4nAiidGozt&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>Frozen amount: current.frozen is 15 1e8, surplus：current.balance is 85 1e8</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>...
    <span class="token property">&quot;ty&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tyName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TyLogJs&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;log&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\&quot;__type__\&quot;:\&quot;game\&quot;,\&quot;addr\&quot;:\&quot;14KEKbYtKKQm4wMthSK9J4La4nAiidGozt\&quot;,\&quot;bet\&quot;:1500000000,\&quot;gameid\&quot;:4100000,\&quot;hash\&quot;:\&quot;0x2b3e9d1bd4dfcd6766f6aacc366d8e360e9896de1cc4da0501b30d696a506d2a\&quot;,\&quot;height\&quot;:41,\&quot;obet\&quot;:1500000000,\&quot;randhash\&quot;:\&quot;0x5d2ac15654aa1859af80d1dfa5d7a5775c359fe3a49abce03796f4fbc313b57f\&quot;,\&quot;status\&quot;:1}&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>You can see that the game was created. and gameid is 4100000.then use the same method to call method Guess and CloseGame to guess number and draw a lottery.</p> <hr> <blockquote><p><strong>step5:</strong> Invoke the query interface to list games created by certain address</p></blockquote> <div class="language- extra-class"><pre><code>./chain33-cli jsvm query -a &quot;Parameter list in json format&quot; -f &quot;The method name&quot; -n &quot;The contract name&quot;

./chain33-cli jsvm query -a &quot;{\&quot;addr\&quot;:\&quot;14KEKbYtKKQm4wMthSK9J4La4nAiidGozt\&quot;, \&quot;count\&quot;:20}&quot; -f &quot;ListGameByAddr&quot; -n game
</code></pre></div><p>The return contents are as follows:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[{\&quot;left\&quot;:{\&quot;__type__\&quot;:\&quot;game\&quot;,\&quot;addr\&quot;:\&quot;14KEKbYtKKQm4wMthSK9J4La4nAiidGozt\&quot;,\&quot;bet\&quot;:1500000000,\&quot;gameid\&quot;:4100000,\&quot;hash\&quot;:\&quot;0x2b3e9d1bd4dfcd6766f6aacc366d8e360e9896de1cc4da0501b30d696a506d2a\&quot;,\&quot;height\&quot;:41,\&quot;obet\&quot;:1500000000,\&quot;randhash\&quot;:\&quot;0x5d2ac15654aa1859af80d1dfa5d7a5775c359fe3a49abce03796f4fbc313b57f\&quot;,\&quot;status\&quot;:1}}]&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>You can use the same method to invole the ListMatchByAddr method to list the game in a certain state created at a certain address. Because of the use of join table queries,you need to find the result through the JoinKey method first, and then use the result as a parameter to call the ListMatchByAddr method to get the final result.</p></blockquote> <h2 id="call-the-jsonrpc-interface-to-deploy-smart-contract"><a href="#call-the-jsonrpc-interface-to-deploy-smart-contract" class="header-anchor">#</a> Call the JSONRPC Interface to Deploy Smart Contract</h2> <h3 id="deploy-a-jsvm-contract-createtransaction"><a href="#deploy-a-jsvm-contract-createtransaction" class="header-anchor">#</a> Deploy a JSVM Contract CreateTransaction</h3> <blockquote><p>In addition to creating the original transaction here, it is also necessary to sign and send the transaction.
If digital currency will be used in the contract, it is required to recharge the contract before invoking it.</p></blockquote> <p>**Request message: **</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;jsonrpc&quot;</span><span class="token operator">:</span><span class="token string">&quot;2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Chain33.CreateTransaction&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;params&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;execer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;actionName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;string&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span>int32<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>Parameter description:</strong></p> <table><thead><tr><th>Parameter</th> <th>Type</th> <th>If Necessary</th> <th>Description</th></tr></thead> <tbody><tr><td>execer</td> <td>string</td> <td>Yes</td> <td>Executor name, fixed here as JSVM</td></tr> <tr><td>actionName</td> <td>string</td> <td>Yes</td> <td>Action name, fixed here as Create</td></tr> <tr><td>payload.code</td> <td>string</td> <td>Yes</td> <td>javascript code</td></tr> <tr><td>payload.name</td> <td>string</td> <td>Yes</td> <td>contract name</td></tr></tbody></table> <p>**Response message: **</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span>int32<span class="token punctuation">,</span>
    <span class="token property">&quot;result&quot;</span><span class="token operator">:</span><span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;error&quot;</span><span class="token operator">:</span><span class="token null keyword">null</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>Parameter description:</strong></p> <table><thead><tr><th>Parameter</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>result</td> <td>string</td> <td>hexadecimal encoded transaction content</td></tr></tbody></table> <p>**Example: **
Request1 Deploy contract transaction:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Chain33.CreateTransaction&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;params&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;execer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jsvm&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;actionName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Create&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;//........................\n//............: ............... 0 - 10 ......... hash(......... + 9) (.....................) NewGame()\n//............................................................ Guess()\n//...... CloseGame()\nfunction Init(context) {\n    this.kvc = new kvcreator(\&quot;init\&quot;)\n    this.context = context\n    return this.kvc.receipt()\n}\n\nvar MIN_WAIT_BLOCK = 2\nvar RAND_MAX = 10\n\nfunction ExecInit() {\n    this.acc = new account(this.kvc, \&quot;coins\&quot;, \&quot;bty\&quot;)\n}\n\nExec.prototype.NewGame = function(args) {\n    var game = {__type__ : \&quot;game\&quot;}\n    game.gameid = this.txID()\n    game.height = this.context.height\n    game.randhash = args.randhash\n    game.bet = args.bet\n    game.hash = this.context.txhash\n    game.obet = game.bet\n    game.addr = this.context.from\n    game.status = 1 //open\n    //............ 9000...,......js... int .........\n    if (game.bet &lt; 10 * COINS || game.bet &gt; 10000000 * COINS) {\n        throwerr(\&quot;bet low than 10 or hight than 10000000\&quot;)\n    }\n    if (this.kvc.get(game.randhash)) { //......randhash ..................\n        throwerr(\&quot;dup rand hash\&quot;)\n    }\n    var err = this.acc.execFrozen(this.name, this.context.from, game.bet)\n    throwerr(err)\n    this.kvc.add(game.gameid, game)\n    this.kvc.add(game.randhash, \&quot;ok\&quot;)\n    this.kvc.addlog(game)\n    return this.kvc.receipt()\n}\n\nExec.prototype.Guess = function(args) {\n    var match = {__type__ : \&quot;match\&quot;}\n    match.gameid = args.gameid\n    match.bet = args.bet\n    match.id = this.txID()\n    match.addr = this.context.from\n    match.hash = this.context.txhash\n    match.num = args.num\n    var game = this.kvc.get(match.gameid)\n    if (!game) {\n        throwerr(\&quot;guess: game id not found\&quot;)\n    }\n    if (game.status != 1) {\n        throwerr(\&quot;guess: game status not open\&quot;)\n    }\n    if (this.context.from == game.addr) {\n        throwerr(\&quot;guess: game addr and match addr is same\&quot;)\n    }\n    if (match.bet &lt; 1 * COINS || match.bet &gt; game.bet / RAND_MAX) {\n        throwerr(\&quot;match bet litte than 1 or big than game.bet/10\&quot;)\n    }\n    var err = this.acc.execFrozen(this.name, this.context.from, match.bet)\n    console.log(this.name, this.context.from, err)\n    throwerr(err)\n    this.kvc.add(match.id, match)\n    this.kvc.addlog(match)\n    return this.kvc.receipt()\n}\n\nExec.prototype.CloseGame = function(args) {\n    var local = MatchLocalTable(this.kvc)\n    var game = this.kvc.get(args.gameid)\n    if (!game) {\n        throwerr(\&quot;game id not found\&quot;)\n    }\n    var querykey = local.get(\&quot;gameid\&quot;, args)\n    var matches = local.query(\&quot;gameid\&quot;, querykey, \&quot;\&quot;, 0, 1)\n    if (!matches) {\n        matches = []\n    }\n    var n = -1\n    for (var i = 0; i &lt; RAND_MAX; i++) {\n        if (Sha256(args.randstr + i) == game.randhash) {\n            n = i\n        }\n    }\n    if (n == -1) {\n        throwerr(\&quot;err rand str\&quot;)\n    }\n    //.........................................................\n    if (this.context.height - game.height &lt; MIN_WAIT_BLOCK) {\n        throwerr(\&quot;close game must wait \&quot;+MIN_WAIT_BLOCK+\&quot; block\&quot;)\n    }\n    for (var i = 0; i &lt; matches.length; i++) {\n        var match = matches[i].left\n        if (match.num == n) {\n            //................................................................................................ this\n            win.call(this, game, match)\n        } else {\n            fail.call(this, game, match)\n        }\n    }\n    if (game.bet &gt; 0) {\n        var err = this.acc.execActive(this.name, game.addr, game.bet)\n        throwerr(err)\n        game.bet = 0\n    }\n    game.status = 2\n    this.kvc.add(game.gameid, game)\n    this.kvc.addlog(game)\n    return this.kvc.receipt()\n}\n\nfunction win(game, match) {\n    var amount = (RAND_MAX - 1) * match.bet\n    if (game.bet - amount &lt; 0) {\n        amount = game.bet\n    }\n    var err \n    if (amount &gt; 0) {\n        err = this.acc.execTransFrozenToActive(this.name, game.addr, match.addr, amount)\n        throwerr(err, \&quot;execTransFrozenToActive\&quot;)\n        game.bet -= amount\n    }\n    err = this.acc.execActive(this.name, match.addr, match.bet)\n    throwerr(err, \&quot;execActive\&quot;)\n}\n\nfunction fail(game, match) {\n    var amount = match.bet\n    err = this.acc.execTransFrozenToFrozen(this.name, match.addr, game.addr, amount)\n    throwerr(err)\n    game.bet += amount\n}\n\nExec.prototype.ForceCloseGame = function(args) {\n    var local = new MatchLocalTable(this.kvc)\n    var game = this.kvc.get(args.id)\n    if (!game) {\n        throwerr(\&quot;game id not found\&quot;)\n    }\n    var matches = local.getmath(args.id)\n    if (!matches) {\n        matches = []\n    }\n    if (this.context.height - game.height &lt; 100) {\n        throwerr(\&quot;force close game must wait 100 block\&quot;)\n    }\n    for (var i = 0; i &lt; matches.length; i++) {\n        var match = matches[i]\n        win.call(this.kvc, game, match)\n    }\n    if (game.bet &gt; 0) {\n        var err = this.acc.execActive(this.name, game.addr, game.bet)\n        throwerr(err)\n        game.bet = 0\n    }\n    game.status = 2\n    this.kvc.add(game.gameid, game)\n    this.kvc.addlog(game)\n    return this.kvc.receipt()\n}\n\nExecLocal.prototype.NewGame = function(args) {\n    return localprocess.call(this, args)\n}\n\nExecLocal.prototype.Guess = function(args) {\n    return localprocess.call(this, args)\n}\n\nExecLocal.prototype.CloseGame = function(args) {\n    return localprocess.call(this, args)\n}\n\nExecLocal.prototype.ForceCloseGame = function(args) {\n    return localprocess.call(this, args)\n}\n\nfunction localprocess(args) {\n    var local = MatchGameTable(this.kvc)\n    local.addlogs(this.logs)\n    local.save()\n    return this.kvc.receipt()\n}\n\nQuery.prototype.ListGameByAddr = function(args) {\n    var local = GameLocalTable(this.kvc)\n    var q = local.query(\&quot;addr\&quot;, args.addr, args.primaryKey, args.count, args.direction)\n    return querytojson(q)\n}\n\nQuery.prototype.ListMatchByAddr = function(args) {\n    var local = MatchGameTable(this.kvc)\n    var q= local.query(\&quot;addr#status\&quot;, args[\&quot;addr#status\&quot;], args.primaryKey, args.count, args.direction)\n    return querytojson(q)\n}\n\nfunction GameLocalTable(kvc) {\n    this.config = {\n        \&quot;#tablename\&quot; : \&quot;game\&quot;,\n        \&quot;#primary\&quot; : \&quot;gameid\&quot;,\n        \&quot;#db\&quot; : \&quot;localdb\&quot;,\n        \&quot;gameid\&quot;    : \&quot;%018d\&quot;,\n        \&quot;status\&quot; : \&quot;%d\&quot;,\n        \&quot;hash\&quot; : \&quot;%s\&quot;,\n        \&quot;addr\&quot; : \&quot;%s\&quot;,\n    }\n    this.defaultvalue = {\n        \&quot;gameid\&quot; : 0,\n        \&quot;status\&quot; : 0,\n        \&quot;hash\&quot; : \&quot;\&quot;,\n        \&quot;addr\&quot; : \&quot;\&quot;,\n    }\n    return new Table(kvc, this.config, this.defaultvalue) \n}\n\nfunction MatchLocalTable(kvc) {\n    this.config = {\n        \&quot;#tablename\&quot; : \&quot;match\&quot;,\n        \&quot;#primary\&quot; : \&quot;id\&quot;,\n        \&quot;#db\&quot; : \&quot;localdb\&quot;,\n        \&quot;id\&quot;    : \&quot;%018d\&quot;,\n        \&quot;gameid\&quot; : \&quot;%018d\&quot;,\n        \&quot;hash\&quot; : \&quot;%s\&quot;,\n        \&quot;addr\&quot; : \&quot;%s\&quot;,\n    }\n    this.defaultvalue = {\n        \&quot;id\&quot; : 0,\n        \&quot;gameid\&quot; : 0,\n        \&quot;hash\&quot; : \&quot;\&quot;,\n        \&quot;addr\&quot; : \&quot;\&quot;,\n    }\n    return new Table(kvc, this.config, this.defaultvalue)  \n}\n\nfunction MatchGameTable(kvc) {\n    return new JoinTable(MatchLocalTable(kvc), GameLocalTable(kvc), \&quot;addr#status\&quot;)\n}\n&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;game&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="calls-the-method-of-the-created-jsvm-contract-createtransaction"><a href="#calls-the-method-of-the-created-jsvm-contract-createtransaction" class="header-anchor">#</a> Calls the method of the created JSVM contract CreateTransaction</h3> <p><strong>Request message:</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;jsonrpc&quot;</span><span class="token operator">:</span><span class="token string">&quot;2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Chain33.CreateTransaction&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;params&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
        <span class="token property">&quot;execer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;actionName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;funcname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>Parameter description:</strong></p> <table><thead><tr><th>Parameter</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>execer</td> <td>string</td> <td>contract name，fixed here as user.jsvm.xxxx</td></tr> <tr><td>actionName</td> <td>string</td> <td>invoke, here fixed as Call</td></tr> <tr><td>payload.name</td> <td>string</td> <td>contract name defined before</td></tr> <tr><td>payload.funcname</td> <td>string</td> <td>called method name</td></tr> <tr><td>payload.args</td> <td>string</td> <td>parameter list</td></tr></tbody></table> <p><strong>Response message:</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span>int32<span class="token punctuation">,</span>
    <span class="token property">&quot;result&quot;</span><span class="token operator">:</span><span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;error&quot;</span><span class="token operator">:</span><span class="token null keyword">null</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>Parameter description:</strong></p> <table><thead><tr><th>Parameter</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>result</td> <td>string</td> <td>hexadecimal encoded transaction string</td></tr></tbody></table> <p><strong>Example</strong>
Request：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;jsonrpc&quot;</span><span class="token operator">:</span><span class="token string">&quot;2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Chain33.CreateTransaction&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;params&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
        <span class="token property">&quot;execer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;user.jsvm.game&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;actionName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Call&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;game&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;funcname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NewGame&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\&quot;bet\&quot;:10000000000, \&quot;randhash\&quot;:\&quot;0x5d2ac15654aa1859af80d1dfa5d7a5775c359fe3a49abce03796f4fbc313b57f\&quot;}&quot;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>Response:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0a0e757365722e6a73766d2e67616d651279180112750a0467616d6512074e657747616d651a647b22626574223a31303030303030303030302c202272616e6468617368223a22307835643261633135363534616131383539616638306431646661356437613537373563333539666533613439616263653033373936663466626333313362353766227d20a08d0630ae97b68eead9ec99083a2231356d6a48594e76506b534d72703353517874637a584c3663696e4d414564654b73&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;error&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="query-the-created-jsvm-contract"><a href="#query-the-created-jsvm-contract" class="header-anchor">#</a> Query the Created JSVM Contract</h3> <p><strong>Request message</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;jsonrpc&quot;</span><span class="token operator">:</span><span class="token string">&quot;2.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Chain33.Query&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;params&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;execer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;funcName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;funcname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\&quot;addr\&quot;:\&quot;14KEKbYtKKQm4wMthSK9J4La4nAiidGozt\&quot;, \&quot;count\&quot;:20}&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>Parameter description</strong></p> <table><thead><tr><th>Parameter</th> <th>Type</th> <th>If Necessary</th> <th>Description</th></tr></thead> <tbody><tr><td>execer</td> <td>string</td> <td>Yes</td> <td>executor name, fixed here as JSVM</td></tr> <tr><td>funcName</td> <td>string</td> <td>Yes</td> <td>function name, fixed here as Create</td></tr> <tr><td>payload.name</td> <td>string</td> <td>Yes</td> <td>contract name</td></tr> <tr><td>payload.funcname</td> <td>string</td> <td>Yes</td> <td>query method name defined in javascript</td></tr> <tr><td>payload.args</td> <td>string</td> <td>Yes</td> <td>parameter list of the query method defined in javascript, expressed in json format</td></tr></tbody></table> <p><strong>Response message:</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> int32<span class="token punctuation">,</span>
  <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;error&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>Parameter description：</strong></p> <table><thead><tr><th>Parameter</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>result.data</td> <td>string</td> <td>result</td></tr></tbody></table> <p><strong>example：</strong>
Request：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Chain33.Query&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;params&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;execer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jsvm&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;funcName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Query&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;game&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;funcname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ListGameByAddr&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\&quot;addr\&quot;:\&quot;14KEKbYtKKQm4wMthSK9J4La4nAiidGozt\&quot;, \&quot;count\&quot;:20}&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>Response：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[{\&quot;left\&quot;:{\&quot;__type__\&quot;:\&quot;game\&quot;,\&quot;addr\&quot;:\&quot;14KEKbYtKKQm4wMthSK9J4La4nAiidGozt\&quot;,\&quot;bet\&quot;:10000000000,\&quot;gameid\&quot;:121400000,\&quot;hash\&quot;:\&quot;0xd3894f7ab60a535d8de47f8a5e06d7c127a22bfe9ff8f1e00971fae19091126f\&quot;,\&quot;height\&quot;:1214,\&quot;obet\&quot;:10000000000,\&quot;randhash\&quot;:\&quot;0x5d2ac15654aa1859af80d1dfa5d7a5775c359fe3a49abce03796f4fbc313b57f\&quot;,\&quot;status\&quot;:1}}]&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;error&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><div class="edit-link"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon edit-icon"><path d="M117.953 696.992 64.306 959.696l265.931-49.336 450.204-452.505-212.284-213.376-450.204 452.513zm496.384-296.326L219.039 797.993l-46.108-46.34L568.233 354.33l46.104 46.335zm345.357-122.99-114.45 115.04-212.288-213.377 114.45-115.035 212.288 213.371zm0 0" fill="currentColor"></path></svg> <a href="https://github.com/bityuan/bty-docs/edit/main/guide/4.DAPP/4.DAPP development in JavaScript language.md" target="_blank" rel="noopener noreferrer">Edit this page</a></div> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">January 28, 2022 14:13</span></div> <!----></footer> <!----> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button class="pswp__button pswp__button--close"></button> <button class="pswp__button pswp__button--share"></button> <button class="pswp__button pswp__button--fs"></button> <button class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button class="pswp__button pswp__button--arrow--left"></button> <button class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/assets/js/app.67e065aa.js" defer></script><script src="/assets/js/vendors~layout-Layout.2b7483c3.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.273fc434.js" defer></script><script src="/assets/js/page-DAPPdevelopmentinJavaScriptlanguage.75535821.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.4a182f2f.js" defer></script>
  </body>
</html>
