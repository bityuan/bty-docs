(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{623:function(t,a,n){"use strict";n.r(a);var e=n(1),s=Object(e.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"国密支持"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#国密支持"}},[t._v("#")]),t._v(" 国密支持")]),t._v(" "),n("blockquote",[n("p",[t._v("Chain33平行链支持国密标准，集成了国密SM2(非对称加解密，签名，验签)算法、SM3哈希算法和SM4对称加解密算法等一系列国家密码局认定的商用密码算法，适用于所有常用的国密应用场景。")])]),t._v(" "),n("h2",{attrs:{id:"使用方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用方法"}},[t._v("#")]),t._v(" 使用方法")]),t._v(" "),n("p",[t._v("用户通过chain33-sdk生成国密公私钥对，构造交易使用国密签名，然后发送到区块链，比特元节点通过国密算法验证签名。")]),t._v(" "),n("h3",{attrs:{id:"环境搭建"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#环境搭建"}},[t._v("#")]),t._v(" 环境搭建")]),t._v(" "),n("p",[t._v("根据需要搭建平行链，搭建方法请参考："),n("a",{attrs:{href:"https://docs.bityuan.com/zh/guide/1.%E5%85%A5%E9%97%A8/2.%20Build%20parachain/",target:"_blank",rel:"noopener noreferrer"}},[t._v("平行链搭建"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("节点不需要对国密有额外的配置，节点会根据签名类型自适应验签方式。")]),t._v(" "),n("h3",{attrs:{id:"构造国密交易"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#构造国密交易"}},[t._v("#")]),t._v(" 构造国密交易")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 生成公私钥对\nSM2KeyPair keyPair = SM2Util.generateKeyPair();\n// 构造交易\nTransaction transation = createTxRaw(toAddress, execer.getBytes(), payLoad, DEFAULT_FEE);\n// 交易签名\nbyte[] msg = encodeProtobuf(transation)\nbyte[] priv = keyPair.getPrivateKey().toByteArray()\nbyte[] uid = "gm test".getBytes()\nsign(SignType.SM2, msg, priv, uid, transation);\n// 交易发送\nbyte[] encodeProtobufWithSign = encodeProtobufWithSign(transation);\nString transationHash = HexUtil.toHexString(encodeProtobufWithSign);\nString hash = chain33client.submitTransaction(transactionHash);\n')])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br")])]),n("p",[n("strong",[t._v("国密签名结合证书校验")]),t._v("\n国密签名可以结合证书一起使用，使用示例参考"),n("a",{attrs:{href:"https://docs.bityuan.com/zh/guide/2.%E8%BF%9B%E9%98%B6/2.%E7%B3%BB%E7%BB%9F%E4%BD%BF%E7%94%A8/3.CA%E5%B7%A5%E5%85%B7/1.CA%E6%9C%8D%E5%8A%A1%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CA服务使用说明"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("strong",[t._v("国密接口说明")]),t._v("\n国密的接口文档，请参考"),n("a",{attrs:{href:"https://github.com/33cn/chain33-sdk-java/blob/master/%E8%81%94%E7%9B%9F%E9%93%BE%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E.md#%E5%9B%BD%E5%AF%86%E6%8E%A5%E5%8F%A3",target:"_blank",rel:"noopener noreferrer"}},[t._v("chain33-sdk"),n("OutboundLink")],1),t._v("。")])])}),[],!1,null,null,null);a.default=s.exports}}]);